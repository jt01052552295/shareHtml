@@include('partials/html-start.html', { "title": "근무등록" })
<header class="header_menu">
  <div class="inner d-flex justify-content-between">
    <button class="btn p-0" onclick="history.back()">
      <img src="./assets/images/icon/ico_back.png" alt="" />
    </button>
    <p class="title fs-20 fw-bold">근무등록</p>
  </div>
</header>
<section class="contents pt-70 pb-100">
  <div class="work_register">
    <div class="inner">
      <div class="type_con d-flex">
        <div class="color_con" data-bs-toggle="offcanvas" data-bs-target="#colorModal">
          <label for="" class="form-label">근무색상</label>
          <div class="box yellow">
            <p class="">색상</p>
          </div>
        </div>
        <div class="type" data-bs-toggle="offcanvas" data-bs-target="#payTypeModal">
          <label for="" class="form-label">유형</label>
          <p class="down_arr">시급</p>
        </div>
      </div>

      <div class="option_con">
        <div class="time d-flex justify-content-between">
          <div class="">
            <label for="exampleFormControlInput1" class="form-label">출근 시간</label>
            <input
              type="text"
              class="form-control form-control-lg right_arr"
              data-bs-toggle="offcanvas"
              data-bs-target="#offcanvasBottom"
              aria-controls="offcanvasBottom"
              id="exampleFormControlInput1"
              data-bs-toggle="offcanvas"
              data-bs-target="#timeModal"
              placeholder=""
              value="09:00"
              readonly
            />
          </div>
          <div class="">
            <label for="exampleFormControlInput1" class="form-label">퇴근 시간</label>
            <input
              type="text"
              class="form-control form-control-lg right_arr"
              data-bs-toggle="offcanvas"
              data-bs-target="#offcanvasBottom"
              aria-controls="offcanvasBottom"
              id="exampleFormControlInput1"
              data-bs-toggle="offcanvas"
              data-bs-target="#timeModal"
              placeholder=""
              value="18:00"
              readonly
            />
          </div>
        </div>
        <label for="exampleFormControlInput1" class="form-label mt-20">휴게 시간</label>
        <input
          type="text"
          class="form-control form-control-lg right_arr"
          data-bs-toggle="offcanvas"
          data-bs-target="#offcanvasBottom"
          aria-controls="offcanvasBottom"
          placeholder=""
          value="09:00"
          readonly
        />
        <div class="unit_con">
          <label for="exampleFormControlInput1" class="form-label mt-20">기본 시급</label>
          <input
            type="text"
            class="form-control form-control-lg wageInput"
            id="exampleFormControlInput1"
            placeholder=""
            value="10,000"
            data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasBottom"
            aria-controls="offcanvasBottom"
          />
        </div>
        <div class="add_option d-flex">
          <div class="form-check">
            <input
              class="form-check-input check_type"
              type="checkbox"
              value=""
              id="flexCheckDefault1"
              name="sort"
              checked
            />
            <label class="form-check-label check_label large-m main" for="flexCheckDefault1">야간</label>
          </div>
          <div class="form-check">
            <input class="form-check-input check_type" type="checkbox" value="" id="flexCheckDefault2" name="sort" />
            <label class="form-check-label check_label large-m main" for="flexCheckDefault2">연장</label>
          </div>
          <div class="form-check">
            <input class="form-check-input check_type" type="checkbox" value="" id="flexCheckDefault3" name="sort" />
            <label class="form-check-label check_label large-m main" for="flexCheckDefault3">특근</label>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<div class="btn_con one">
  <button class="btn btn-primary btn-lg">날짜 선택하기</button>
</div>
<!-- offcanvas -->
<div class="offcanvas offcanvas-bottom" tabindex="-1" id="offcanvasBottom" aria-labelledby="offcanvasBottomLabel">
  <div class="keypad_con">
    <div class="box">
      <div class="keypad">
        <div class="key">1</div>
        <div class="key">2</div>
        <div class="key">3</div>
        <div class="key">4</div>
        <div class="key">5</div>
        <div class="key">6</div>
        <div class="key">7</div>
        <div class="key">8</div>
        <div class="key">9</div>
        <div class="key">00</div>
        <div class="key zero">0</div>
        <div class="key backspace">⌫</div>
      </div>
    </div>
  </div>
</div>
<div
  class="offcanvas offcanvas-bottom payTypeModal"
  tabindex="-1"
  id="payTypeModal"
  aria-labelledby="offcanvasBottomLabel"
>
  <div class="offcanvas-body small">
    <p class="tit large-b">급여유형을 선택해주세요</p>
    <ul class="date_con">
      <li class="list">
        <button class="btn btn-light">
          <p class="t1 large-b">월급</p>
          <p class="t2 small-m">매달 받는 고정 급여를 기준으로 계산합니다</p>
        </button>
      </li>
      <li class="list">
        <button class="btn btn-light">
          <p class="t1 large-b">시급</p>
          <p class="t2 small-m">내 급여를 일한 시간당으로 계산합니다</p>
        </button>
      </li>
      <li class="list">
        <button class="btn btn-light">
          <p class="t1 large-b">일급</p>
          <p class="t2 small-m">당일 지정된 급여만큼 계산합니다</p>
        </button>
      </li>
      <li class="list">
        <button class="btn btn-light">
          <p class="t1 large-b">연차</p>
          <p class="t2 small-m">사용한 연차에 따른 급여를 계산합니다</p>
        </button>
      </li>
      <li class="list">
        <button class="btn btn-light">
          <p class="t1 large-b">휴무</p>
          <p class="t2 small-m">휴무일에 해당하는 급여를 계산합니다</p>
        </button>
      </li>
      <li class="list">
        <button class="btn btn-light">
          <p class="t1 large-b">결근</p>
          <p class="t2 small-m">결근한 날의 급여 차감을 계산합니다</p>
        </button>
      </li>
    </ul>
  </div>
</div>

<div class="offcanvas offcanvas-bottom timeModal" tabindex="-1" id="timeModal" aria-labelledby="offcanvasBottomLabel">
  <div class="offcanvas-body small">
    <p class="tit large-b">시간을 선택해주세요</p>
    <div class="picker-container">
      <div class="picker" id="hourPicker">
        <ul></ul>
      </div>
      <div class="picker" id="minutePicker">
        <ul></ul>
      </div>
    </div>
  </div>
</div>

<div class="offcanvas offcanvas-bottom colorModal" tabindex="-1" id="colorModal" aria-labelledby="offcanvasBottomLabel">
  <div class="offcanvas-body small">
    <p class="tit large-b">색상을 선택해주세요</p>
    <ul class="color_con">
      <li class="list"><button class="btn btn-light type1"></button></li>
      <li class="list"><button class="btn btn-light type2"></button></li>
      <li class="list"><button class="btn btn-light type3"></button></li>
      <li class="list"><button class="btn btn-light type4"></button></li>
      <li class="list"><button class="btn btn-light type5"></button></li>
      <li class="list"><button class="btn btn-light type6"></button></li>
      <li class="list"><button class="btn btn-light type7"></button></li>
      <li class="list"><button class="btn btn-light type8"></button></li>
      <li class="list"><button class="btn btn-light type9"></button></li>
      <li class="list"><button class="btn btn-light type10"></button></li>
      <li class="list"><button class="btn btn-light type11"></button></li>
      <li class="list"><button class="btn btn-light type12"></button></li>
      <li class="list"><button class="btn btn-light type13"></button></li>
      <li class="list"><button class="btn btn-light type14"></button></li>
      <li class="list"><button class="btn btn-light type15"></button></li>
    </ul>
  </div>
</div>
<script>
  // 시간설정 코드
  function createPickerItems(pickerId, range) {
    const ul = document.querySelector(`#${pickerId} ul`);
    for (let i = 0; i < range; i++) {
      const li = document.createElement('li');
      li.textContent = i.toString().padStart(2, '0');
      ul.appendChild(li);
    }
  }

  // 시간: 0~23, 분: 0~59
  createPickerItems('hourPicker', 24);
  createPickerItems('minutePicker', 60);

  // 선택된 값을 가져오는 함수
  function getSelectedTime() {
    const hourPicker = document.getElementById('hourPicker');
    const minutePicker = document.getElementById('minutePicker');

    const hourIndex = Math.round(hourPicker.scrollTop / 50);
    const minuteIndex = Math.round(minutePicker.scrollTop / 50);

    return {
      hour: hourIndex.toString().padStart(2, '0'),
      minute: minuteIndex.toString().padStart(2, '0')
    };
  }

  // 예시: 3초 후 선택된 값 출력
  setTimeout(() => {
    const time = getSelectedTime();
    console.log(`Selected Time: ${time.hour}:${time.minute}`);
  }, 3000);

  // 시급입력 코드
  const wageInput = document.querySelector('.wageInput');

  wageInput.addEventListener('input', (e) => {
    const raw = e.target.value;
    const numericOnly = raw.replace(/[^0-9]/g, '');

    // 기존 값에서 숫자만 추출한 뒤 다시 포맷한 값
    const formatted = numericOnly ? Number(numericOnly).toLocaleString() : '';

    // 사용자가 숫자만 입력한 경우엔 알림 띄우지 않음
    if (raw !== formatted && /[^0-9,]/.test(raw)) {
      alert('숫자만 입력 가능합니다.');
    }

    e.target.value = formatted;
  });

  // 붙여넣기 검증
  wageInput.addEventListener('paste', (e) => {
    const paste = (e.clipboardData || window.clipboardData).getData('text');
    if (!/^\d+$/.test(paste)) {
      e.preventDefault();
      alert('숫자만 입력 가능합니다.');
    }
  });
</script>
@@include('partials/html-end.html')
